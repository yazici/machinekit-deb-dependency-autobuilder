A Makefile and pbuilderrc to automatically build Machinekit package
dependencies for Debian armhf, amd64 and i386

Current list of packages:

- Xenomai 2.6.3 and matching Linux 3.8.13 kernel (RTAI in future)
  - linux-tools 3.8 to match the kernel
- ZeroMQ, czmq, pyzmq, libsodium
- libwebsockets
- jansson

---------------------------
Preparing:

The scripts should be cloned out recursively, since they contain
submodules for each package.

    git clone --recursive \
        https://github.com/zultron/machinekit-deb-dependency-autobuilder.git

---------------------------
Prerequisites:

The pbuilder, reprepro and quilt packages must be installed, in
addition to the usual kernel development environment.

    apt-get install pbuilder reprepro quilt autotools-dev

---------------------------
Restricting build list:

NOTE: It is advised to trim the build list to save build time, even if
explicitly supplying a <codename>-<arch> target.

If only a subset of codenames or arches is needed, restrict them by
trimming the 'CODENAMES' and 'ARCHES' variables in the Makefile.

For example, to build only Wheezy and Jessie amd64 kernels:

    ARCHES = amd64               # i386 removed
    CODENAMES = wheezy jessie    # precise removed

---------------------------
Targets:

all:  (Default target)  Build all <codename>-<arch> combos

help:  Print some help

clean:  Clean up all targets that can be easily regenerated

squeaky-clean: Clean up all targets that are expensive to repace,
    including downloaded tarballs, git submodules, apt and C caches,
    and chroots.

<codename>.all:  e.g. wheezy.all
    Build all packages for the specified distro

<codename>-<arch>.chroot:  e.g. jessie-amd64.chroot
    Set up and log into a chroot

<codename>-<arch>.clean:
    Remove build artifacts specific to that codename/arch; leave
    common artifacts

Codename is one of wheezy, jessie, precise

Arch is one of amd64, i386

Most simply, just run 'make' to build all packages for all
<codename>-<arch> combos.

To pass in options to dpkg-buildpackage, use e.g.

    make DEBBUILDOPTS=-j16

---------------------------
What it does

For each <codename>-<arch> combo:
- Downloads sources, checks out git repos, builds gpg keyring
- Creates a base pbuilder chroot tarball
- Builds the Xenomai and RTAI packages
- Builds a local PPA with the Xenomai and RTAI packages needed for the
  kernel build
- Updates the pbuilder chroot tarball with the new PPA
- Builds the Xenomai and RTAI kernel packages
  - The RTAI package builds RTAI modules, included in the kernel
- Builds the linux-tools package
- Updates the local PPA with all packages

Package results go into pkgs.

PPAs go into ppa.
